{% for subdirectory in directory.directories %}
    {% if subdirectory.directories %}
        <li 
            id="collapse{{directory.name}}" 
            class="ms-{{depth}} collapse {% if subdirectory.name in request.get_full_path %} show {% endif %}"
        >
            <i class="fa-solid fa-folder"></i>
            <a 
                data-bs-toggle="collapse" 
                href="#collapse{{subdirectory.name}}" 
                role="button" 
                aria-expanded="false" 
                aria-controls="collapse{{subdirectory.name}}"
            >
                {{ subdirectory.name }}
            </a>
        </li>
        {% include 'includes/subdirectories.html' with directory=subdirectory depth=depth|add:"2" %}
    {% else %}
        <li 
            id="collapse{{directory.name}}" 
            class="ms-{{depth}} collapse {% if subdirectory.name in request.get_full_path %} show {% endif %} "
        >
            <i class="fa-solid fa-folder"></i>
            <a href="{% url 'file_manager' subdirectory.path %}">{{ subdirectory.name }}</a>
        </li>
    {% endif %}
{% endfor %}